<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 6.0.1 (20220911.1526)
 -->
<!-- Title: vLLM_Architecture Pages: 1 -->
<svg width="870pt" height="1306pt"
 viewBox="0.00 0.00 869.50 1306.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1302)">
<title>vLLM_Architecture</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1302 865.5,-1302 865.5,4 -4,4"/>
<text text-anchor="middle" x="430.75" y="-1270.4" font-family="Arial bold" font-size="12.00">vLLM 架构类关系图</text>
<text text-anchor="middle" x="430.75" y="-1257.4" font-family="Arial bold" font-size="12.00"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="430.75" y="-1244.4" font-family="Arial bold" font-size="12.00">主要展示核心组件之间的关系和调用流程</text>
<text text-anchor="middle" x="430.75" y="-1231.4" font-family="Arial bold" font-size="12.00"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="430.75" y="-1218.4" font-family="Arial bold" font-size="12.00">蓝色：API接口类 &#160;黄色：引擎与执行器 &#160;粉色：工作器类 &#160;绿色：模型运行器类</text>
<!-- LLM -->
<g id="node1" class="node">
<title>LLM</title>
<polygon fill="#e6f2ff" stroke="black" points="572.5,-1139.5 572.5,-1210.5 759.5,-1210.5 759.5,-1139.5 572.5,-1139.5"/>
<text text-anchor="middle" x="666" y="-1198.5" font-family="Arial" font-size="10.00">LLM</text>
<text text-anchor="middle" x="666" y="-1187.5" font-family="Arial" font-size="10.00">(entrypoints/llm.py)</text>
<polyline fill="none" stroke="black" points="572.5,-1180.5 759.5,-1180.5"/>
<text text-anchor="start" x="580.5" y="-1168.5" font-family="Arial" font-size="10.00">+ __init__(model, ...)</text>
<text text-anchor="start" x="580.5" y="-1157.5" font-family="Arial" font-size="10.00">+ generate(prompts, sampling_params)</text>
<text text-anchor="start" x="580.5" y="-1146.5" font-family="Arial" font-size="10.00">+ get_engine_class()</text>
</g>
<!-- LLMEngine -->
<g id="node2" class="node">
<title>LLMEngine</title>
<polygon fill="#ffebcd" stroke="black" points="402.5,-999.5 402.5,-1092.5 583.5,-1092.5 583.5,-999.5 402.5,-999.5"/>
<text text-anchor="middle" x="493" y="-1080.5" font-family="Arial" font-size="10.00">LLMEngine</text>
<text text-anchor="middle" x="493" y="-1069.5" font-family="Arial" font-size="10.00">(llm_engine.py)</text>
<polyline fill="none" stroke="black" points="402.5,-1062.5 583.5,-1062.5"/>
<text text-anchor="start" x="410.5" y="-1050.5" font-family="Arial" font-size="10.00">+ __init__()</text>
<text text-anchor="start" x="410.5" y="-1039.5" font-family="Arial" font-size="10.00">+ from_engine_args(cls, args)</text>
<text text-anchor="start" x="410.5" y="-1028.5" font-family="Arial" font-size="10.00">+ add_request(request_id, prompt, ...)</text>
<text text-anchor="start" x="410.5" y="-1017.5" font-family="Arial" font-size="10.00">+ step()</text>
<text text-anchor="start" x="410.5" y="-1006.5" font-family="Arial" font-size="10.00">+ get_model_config()</text>
</g>
<!-- LLM&#45;&gt;LLMEngine -->
<g id="edge1" class="edge">
<title>LLM&#45;&gt;LLMEngine</title>
<path fill="none" stroke="black" d="M618.73,-1139.3C601.65,-1126.76 581.98,-1112.32 563.34,-1098.64"/>
<polygon fill="black" stroke="black" points="565.28,-1095.72 555.15,-1092.63 561.14,-1101.36 565.28,-1095.72"/>
<text text-anchor="middle" x="599.5" y="-1113.8" font-family="Arial" font-size="9.00">使用</text>
</g>
<!-- EngineArgs -->
<g id="node3" class="node">
<title>EngineArgs</title>
<polygon fill="#e0ffff" stroke="black" points="602,-1005 602,-1087 730,-1087 730,-1005 602,-1005"/>
<text text-anchor="middle" x="666" y="-1075" font-family="Arial" font-size="10.00">EngineArgs</text>
<text text-anchor="middle" x="666" y="-1064" font-family="Arial" font-size="10.00">(config.py)</text>
<polyline fill="none" stroke="black" points="602,-1057 730,-1057"/>
<text text-anchor="start" x="610" y="-1045" font-family="Arial" font-size="10.00">+ model: str</text>
<text text-anchor="start" x="610" y="-1034" font-family="Arial" font-size="10.00">+ tensor_parallel_size: int</text>
<text text-anchor="start" x="610" y="-1023" font-family="Arial" font-size="10.00">+ from_cli_args(cls, args)</text>
<text text-anchor="start" x="610" y="-1012" font-family="Arial" font-size="10.00">+ __post_init__()</text>
</g>
<!-- LLM&#45;&gt;EngineArgs -->
<g id="edge2" class="edge">
<title>LLM&#45;&gt;EngineArgs</title>
<path fill="none" stroke="black" d="M666,-1139.3C666,-1126.3 666,-1111.25 666,-1097.13"/>
<polygon fill="black" stroke="black" points="669.5,-1097.05 666,-1087.05 662.5,-1097.05 669.5,-1097.05"/>
<text text-anchor="middle" x="675.5" y="-1113.8" font-family="Arial" font-size="9.00">配置</text>
</g>
<!-- SamplingParams -->
<g id="node4" class="node">
<title>SamplingParams</title>
<polygon fill="#e0ffff" stroke="black" points="748.5,-1005 748.5,-1087 861.5,-1087 861.5,-1005 748.5,-1005"/>
<text text-anchor="middle" x="805" y="-1075" font-family="Arial" font-size="10.00">SamplingParams</text>
<text text-anchor="middle" x="805" y="-1064" font-family="Arial" font-size="10.00">(sampling_params.py)</text>
<polyline fill="none" stroke="black" points="748.5,-1057 861.5,-1057"/>
<text text-anchor="start" x="756.5" y="-1045" font-family="Arial" font-size="10.00">+ temperature: float</text>
<text text-anchor="start" x="756.5" y="-1034" font-family="Arial" font-size="10.00">+ top_p: float</text>
<text text-anchor="start" x="756.5" y="-1023" font-family="Arial" font-size="10.00">+ max_tokens: int</text>
<text text-anchor="start" x="756.5" y="-1012" font-family="Arial" font-size="10.00">+ best_of: int</text>
</g>
<!-- LLM&#45;&gt;SamplingParams -->
<g id="edge3" class="edge">
<title>LLM&#45;&gt;SamplingParams</title>
<path fill="none" stroke="black" d="M703.98,-1139.3C719.32,-1125.29 737.25,-1108.9 753.72,-1093.86"/>
<polygon fill="black" stroke="black" points="756.14,-1096.38 761.16,-1087.05 751.42,-1091.21 756.14,-1096.38"/>
<text text-anchor="middle" x="741.5" y="-1113.8" font-family="Arial" font-size="9.00">调用</text>
</g>
<!-- ExecutorBase -->
<g id="node11" class="node">
<title>ExecutorBase</title>
<polygon fill="#f0e68c" stroke="black" points="423,-881.5 423,-941.5 563,-941.5 563,-881.5 423,-881.5"/>
<text text-anchor="middle" x="493" y="-929.5" font-family="Arial" font-size="10.00">ExecutorBase</text>
<text text-anchor="middle" x="493" y="-918.5" font-family="Arial" font-size="10.00">(executor/executor_base.py)</text>
<polyline fill="none" stroke="black" points="423,-911.5 563,-911.5"/>
<text text-anchor="start" x="431" y="-899.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config)</text>
<text text-anchor="start" x="431" y="-888.5" font-family="Arial" font-size="10.00">+ _init_executor()</text>
</g>
<!-- LLMEngine&#45;&gt;ExecutorBase -->
<g id="edge4" class="edge">
<title>LLMEngine&#45;&gt;ExecutorBase</title>
<path fill="none" stroke="black" d="M493,-999.4C493,-983.98 493,-966.9 493,-951.99"/>
<polygon fill="black" stroke="black" points="496.5,-951.58 493,-941.58 489.5,-951.58 496.5,-951.58"/>
<text text-anchor="middle" x="502.5" y="-973.8" font-family="Arial" font-size="9.00">创建</text>
</g>
<!-- Platform -->
<g id="node16" class="node">
<title>Platform</title>
<polygon fill="#d8bfd8" stroke="black" points="683.5,-870.5 683.5,-952.5 802.5,-952.5 802.5,-870.5 683.5,-870.5"/>
<text text-anchor="middle" x="743" y="-940.5" font-family="Arial" font-size="10.00">Platform</text>
<text text-anchor="middle" x="743" y="-929.5" font-family="Arial" font-size="10.00">(platforms/platform.py)</text>
<polyline fill="none" stroke="black" points="683.5,-922.5 802.5,-922.5"/>
<text text-anchor="start" x="691.5" y="-910.5" font-family="Arial" font-size="10.00">+ is_cuda()</text>
<text text-anchor="start" x="691.5" y="-899.5" font-family="Arial" font-size="10.00">+ is_cpu()</text>
<text text-anchor="start" x="691.5" y="-888.5" font-family="Arial" font-size="10.00">+ get_device_type()</text>
<text text-anchor="start" x="691.5" y="-877.5" font-family="Arial" font-size="10.00">+ get_default_workers()</text>
</g>
<!-- EngineArgs&#45;&gt;Platform -->
<g id="edge19" class="edge">
<title>EngineArgs&#45;&gt;Platform</title>
<path fill="none" stroke="black" d="M689.31,-1004.89C697.23,-991.26 706.17,-975.88 714.45,-961.63"/>
<polygon fill="black" stroke="black" points="717.5,-963.34 719.5,-952.93 711.45,-959.82 717.5,-963.34"/>
<text text-anchor="middle" x="716.5" y="-973.8" font-family="Arial" font-size="9.00">加载</text>
</g>
<!-- Plugins -->
<g id="node17" class="node">
<title>Plugins</title>
<polygon fill="#d8bfd8" stroke="black" points="609,-893.5 609,-929.5 665,-929.5 665,-893.5 609,-893.5"/>
<text text-anchor="middle" x="637" y="-914.5" font-family="Arial" font-size="10.00">Plugins</text>
<text text-anchor="start" x="617" y="-903.5" font-family="Arial" font-size="10.00">(plugins/)</text>
</g>
<!-- EngineArgs&#45;&gt;Plugins -->
<g id="edge20" class="edge">
<title>EngineArgs&#45;&gt;Plugins</title>
<path fill="none" stroke="black" d="M657.22,-1004.89C652.6,-983.78 647.06,-958.45 642.94,-939.66"/>
<polygon fill="black" stroke="black" points="646.32,-938.71 640.76,-929.69 639.48,-940.21 646.32,-938.71"/>
<text text-anchor="middle" x="666" y="-973.8" font-family="Arial" font-size="9.00">初始化</text>
</g>
<!-- WorkerBase -->
<g id="node5" class="node">
<title>WorkerBase</title>
<polygon fill="#ffe4e1" stroke="black" points="305,-505.5 305,-587.5 429,-587.5 429,-505.5 305,-505.5"/>
<text text-anchor="middle" x="367" y="-575.5" font-family="Arial" font-size="10.00">WorkerBase</text>
<text text-anchor="middle" x="367" y="-564.5" font-family="Arial" font-size="10.00">(worker/worker_base.py)</text>
<polyline fill="none" stroke="black" points="305,-557.5 429,-557.5"/>
<text text-anchor="start" x="313" y="-545.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config)</text>
<text text-anchor="start" x="313" y="-534.5" font-family="Arial" font-size="10.00">+ init_device()</text>
<text text-anchor="start" x="313" y="-523.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="313" y="-512.5" font-family="Arial" font-size="10.00">+ execute_model()</text>
</g>
<!-- DelegateWorkerBase -->
<g id="node6" class="node">
<title>DelegateWorkerBase</title>
<polygon fill="#ffe4e1" stroke="black" points="456.5,-376.5 456.5,-458.5 589.5,-458.5 589.5,-376.5 456.5,-376.5"/>
<text text-anchor="middle" x="523" y="-446.5" font-family="Arial" font-size="10.00">DelegateWorkerBase</text>
<text text-anchor="middle" x="523" y="-435.5" font-family="Arial" font-size="10.00">(worker/worker_base.py)</text>
<polyline fill="none" stroke="black" points="456.5,-428.5 589.5,-428.5"/>
<text text-anchor="start" x="464.5" y="-416.5" font-family="Arial" font-size="10.00">+ __init__(*args, **kwargs)</text>
<text text-anchor="start" x="464.5" y="-405.5" font-family="Arial" font-size="10.00">+ init_device()</text>
<text text-anchor="start" x="464.5" y="-394.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="464.5" y="-383.5" font-family="Arial" font-size="10.00">+ __getattr__(attr)</text>
</g>
<!-- WorkerBase&#45;&gt;DelegateWorkerBase -->
<g id="edge8" class="edge">
<title>WorkerBase&#45;&gt;DelegateWorkerBase</title>
<path fill="none" stroke="black" d="M416.36,-505.32C432.09,-492.51 449.61,-478.24 465.84,-465.03"/>
<polygon fill="black" stroke="black" points="468.15,-467.67 473.69,-458.64 463.73,-462.24 468.15,-467.67"/>
<text text-anchor="middle" x="459.5" y="-479.8" font-family="Arial" font-size="9.00">基类</text>
</g>
<!-- GPUWorker -->
<g id="node8" class="node">
<title>GPUWorker</title>
<polygon fill="#fff8dc" stroke="black" points="0,-376.5 0,-458.5 130,-458.5 130,-376.5 0,-376.5"/>
<text text-anchor="middle" x="65" y="-446.5" font-family="Arial" font-size="10.00">GPUWorker</text>
<text text-anchor="middle" x="65" y="-435.5" font-family="Arial" font-size="10.00">(worker/gpu_worker.py)</text>
<polyline fill="none" stroke="black" points="0,-428.5 130,-428.5"/>
<text text-anchor="start" x="8" y="-416.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config, ...)</text>
<text text-anchor="start" x="8" y="-405.5" font-family="Arial" font-size="10.00">+ init_device()</text>
<text text-anchor="start" x="8" y="-394.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="8" y="-383.5" font-family="Arial" font-size="10.00">+ execute_model()</text>
</g>
<!-- WorkerBase&#45;&gt;GPUWorker -->
<g id="edge11" class="edge">
<title>WorkerBase&#45;&gt;GPUWorker</title>
<path fill="none" stroke="black" d="M304.6,-524.45C260.5,-508.98 200.04,-486.56 139.45,-459.05"/>
<polygon fill="black" stroke="black" points="140.67,-455.76 130.12,-454.78 137.75,-462.12 140.67,-455.76"/>
<text text-anchor="middle" x="210.5" y="-479.8" font-family="Arial" font-size="9.00">继承</text>
</g>
<!-- CPUWorker -->
<g id="node9" class="node">
<title>CPUWorker</title>
<polygon fill="#fff8dc" stroke="black" points="148,-376.5 148,-458.5 278,-458.5 278,-376.5 148,-376.5"/>
<text text-anchor="middle" x="213" y="-446.5" font-family="Arial" font-size="10.00">CPUWorker</text>
<text text-anchor="middle" x="213" y="-435.5" font-family="Arial" font-size="10.00">(worker/cpu_worker.py)</text>
<polyline fill="none" stroke="black" points="148,-428.5 278,-428.5"/>
<text text-anchor="start" x="156" y="-416.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config, ...)</text>
<text text-anchor="start" x="156" y="-405.5" font-family="Arial" font-size="10.00">+ init_device()</text>
<text text-anchor="start" x="156" y="-394.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="156" y="-383.5" font-family="Arial" font-size="10.00">+ execute_model()</text>
</g>
<!-- WorkerBase&#45;&gt;CPUWorker -->
<g id="edge12" class="edge">
<title>WorkerBase&#45;&gt;CPUWorker</title>
<path fill="none" stroke="black" d="M318.27,-505.32C302.75,-492.51 285.44,-478.24 269.42,-465.03"/>
<polygon fill="black" stroke="black" points="271.62,-462.3 261.67,-458.64 267.16,-467.7 271.62,-462.3"/>
<text text-anchor="middle" x="304.5" y="-479.8" font-family="Arial" font-size="9.00">继承</text>
</g>
<!-- OpenVINOWorker -->
<g id="node10" class="node">
<title>OpenVINOWorker</title>
<polygon fill="#fff8dc" stroke="black" points="296,-376.5 296,-458.5 438,-458.5 438,-376.5 296,-376.5"/>
<text text-anchor="middle" x="367" y="-446.5" font-family="Arial" font-size="10.00">OpenVINOWorker</text>
<text text-anchor="middle" x="367" y="-435.5" font-family="Arial" font-size="10.00">(worker/openvino_worker.py)</text>
<polyline fill="none" stroke="black" points="296,-428.5 438,-428.5"/>
<text text-anchor="start" x="304" y="-416.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config, ...)</text>
<text text-anchor="start" x="304" y="-405.5" font-family="Arial" font-size="10.00">+ init_device()</text>
<text text-anchor="start" x="304" y="-394.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="304" y="-383.5" font-family="Arial" font-size="10.00">+ execute_model()</text>
</g>
<!-- WorkerBase&#45;&gt;OpenVINOWorker -->
<g id="edge13" class="edge">
<title>WorkerBase&#45;&gt;OpenVINOWorker</title>
<path fill="none" stroke="black" d="M367,-505.32C367,-493.85 367,-481.21 367,-469.2"/>
<polygon fill="black" stroke="black" points="370.5,-468.86 367,-458.86 363.5,-468.86 370.5,-468.86"/>
<text text-anchor="middle" x="376.5" y="-479.8" font-family="Arial" font-size="9.00">继承</text>
</g>
<!-- Utils -->
<g id="node18" class="node">
<title>Utils</title>
<polygon fill="#dcdcdc" stroke="black" points="514,-258.5 514,-318.5 658,-318.5 658,-258.5 514,-258.5"/>
<text text-anchor="middle" x="586" y="-306.5" font-family="Arial" font-size="10.00">Utils</text>
<text text-anchor="middle" x="586" y="-295.5" font-family="Arial" font-size="10.00">(utils.py)</text>
<polyline fill="none" stroke="black" points="514,-288.5 658,-288.5"/>
<text text-anchor="start" x="522" y="-276.5" font-family="Arial" font-size="10.00">+ resolve_obj_by_qualname()</text>
<text text-anchor="start" x="522" y="-265.5" font-family="Arial" font-size="10.00">+ run_method()</text>
</g>
<!-- DelegateWorkerBase&#45;&gt;Utils -->
<g id="edge9" class="edge">
<title>DelegateWorkerBase&#45;&gt;Utils</title>
<path fill="none" stroke="black" d="M542.93,-376.32C550.64,-360.79 559.41,-343.1 567.02,-327.76"/>
<polygon fill="black" stroke="black" points="570.28,-329.07 571.59,-318.56 564.01,-325.96 570.28,-329.07"/>
<text text-anchor="middle" x="566.5" y="-350.8" font-family="Arial" font-size="9.00">使用</text>
</g>
<!-- WorkerWrapperBase -->
<g id="node7" class="node">
<title>WorkerWrapperBase</title>
<polygon fill="#ffe4e1" stroke="black" points="411,-634.5 411,-716.5 575,-716.5 575,-634.5 411,-634.5"/>
<text text-anchor="middle" x="493" y="-704.5" font-family="Arial" font-size="10.00">WorkerWrapperBase</text>
<text text-anchor="middle" x="493" y="-693.5" font-family="Arial" font-size="10.00">(worker/worker_base.py)</text>
<polyline fill="none" stroke="black" points="411,-686.5 575,-686.5"/>
<text text-anchor="start" x="419" y="-674.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config, rpc_rank)</text>
<text text-anchor="start" x="419" y="-663.5" font-family="Arial" font-size="10.00">+ init_worker(all_kwargs)</text>
<text text-anchor="start" x="419" y="-652.5" font-family="Arial" font-size="10.00">+ execute_method(method, *args)</text>
<text text-anchor="start" x="419" y="-641.5" font-family="Arial" font-size="10.00">+ __getattr__(attr)</text>
</g>
<!-- WorkerWrapperBase&#45;&gt;WorkerBase -->
<g id="edge7" class="edge">
<title>WorkerWrapperBase&#45;&gt;WorkerBase</title>
<path fill="none" stroke="black" d="M453.13,-634.32C440.84,-621.92 427.18,-608.16 414.43,-595.3"/>
<polygon fill="black" stroke="black" points="416.57,-592.49 407.04,-587.86 411.6,-597.42 416.57,-592.49"/>
<text text-anchor="middle" x="443.5" y="-608.8" font-family="Arial" font-size="9.00">持有</text>
</g>
<!-- WorkerWrapperBase&#45;&gt;Utils -->
<g id="edge10" class="edge">
<title>WorkerWrapperBase&#45;&gt;Utils</title>
<path fill="none" stroke="black" d="M519.43,-634.47C545.29,-592.69 582.94,-524.29 598,-459 608.09,-415.23 601.94,-363.57 595.29,-328.89"/>
<polygon fill="black" stroke="black" points="598.64,-327.8 593.23,-318.7 591.78,-329.19 598.64,-327.8"/>
<text text-anchor="middle" x="602.5" y="-479.8" font-family="Arial" font-size="9.00">调用</text>
</g>
<!-- ModelRunnerBase -->
<g id="node13" class="node">
<title>ModelRunnerBase</title>
<polygon fill="#98fb98" stroke="black" points="136.5,-247.5 136.5,-329.5 289.5,-329.5 289.5,-247.5 136.5,-247.5"/>
<text text-anchor="middle" x="213" y="-317.5" font-family="Arial" font-size="10.00">ModelRunnerBase</text>
<text text-anchor="middle" x="213" y="-306.5" font-family="Arial" font-size="10.00">(worker/model_runner_base.py)</text>
<polyline fill="none" stroke="black" points="136.5,-299.5 289.5,-299.5"/>
<text text-anchor="start" x="144.5" y="-287.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config)</text>
<text text-anchor="start" x="144.5" y="-276.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="144.5" y="-265.5" font-family="Arial" font-size="10.00">+ execute_model()</text>
<text text-anchor="start" x="144.5" y="-254.5" font-family="Arial" font-size="10.00">+ capture_model(kv_caches)</text>
</g>
<!-- GPUWorker&#45;&gt;ModelRunnerBase -->
<g id="edge14" class="edge">
<title>GPUWorker&#45;&gt;ModelRunnerBase</title>
<path fill="none" stroke="black" d="M111.83,-376.32C126.61,-363.63 143.08,-349.5 158.36,-336.39"/>
<polygon fill="black" stroke="black" points="160.91,-338.81 166.22,-329.64 156.35,-333.5 160.91,-338.81"/>
<text text-anchor="middle" x="153.5" y="-350.8" font-family="Arial" font-size="9.00">持有</text>
</g>
<!-- CPUWorker&#45;&gt;ModelRunnerBase -->
<g id="edge15" class="edge">
<title>CPUWorker&#45;&gt;ModelRunnerBase</title>
<path fill="none" stroke="black" d="M213,-376.32C213,-364.85 213,-352.21 213,-340.2"/>
<polygon fill="black" stroke="black" points="216.5,-339.86 213,-329.86 209.5,-339.86 216.5,-339.86"/>
<text text-anchor="middle" x="222.5" y="-350.8" font-family="Arial" font-size="9.00">持有</text>
</g>
<!-- OpenVINOWorker&#45;&gt;ModelRunnerBase -->
<g id="edge16" class="edge">
<title>OpenVINOWorker&#45;&gt;ModelRunnerBase</title>
<path fill="none" stroke="black" d="M318.27,-376.32C302.75,-363.51 285.44,-349.24 269.42,-336.03"/>
<polygon fill="black" stroke="black" points="271.62,-333.3 261.67,-329.64 267.16,-338.7 271.62,-333.3"/>
<text text-anchor="middle" x="304.5" y="-350.8" font-family="Arial" font-size="9.00">持有</text>
</g>
<!-- UniProcExecutor -->
<g id="node12" class="node">
<title>UniProcExecutor</title>
<polygon fill="#f0e68c" stroke="black" points="417.5,-763.5 417.5,-823.5 568.5,-823.5 568.5,-763.5 417.5,-763.5"/>
<text text-anchor="middle" x="493" y="-811.5" font-family="Arial" font-size="10.00">UniProcExecutor</text>
<text text-anchor="middle" x="493" y="-800.5" font-family="Arial" font-size="10.00">(executor/uniproc_executor.py)</text>
<polyline fill="none" stroke="black" points="417.5,-793.5 568.5,-793.5"/>
<text text-anchor="start" x="425.5" y="-781.5" font-family="Arial" font-size="10.00">+ _init_executor()</text>
<text text-anchor="start" x="425.5" y="-770.5" font-family="Arial" font-size="10.00">+ collective_rpc(method, args)</text>
</g>
<!-- ExecutorBase&#45;&gt;UniProcExecutor -->
<g id="edge5" class="edge">
<title>ExecutorBase&#45;&gt;UniProcExecutor</title>
<path fill="none" stroke="black" d="M493,-881.23C493,-866.94 493,-849.54 493,-834.09"/>
<polygon fill="black" stroke="black" points="496.5,-833.76 493,-823.76 489.5,-833.76 496.5,-833.76"/>
<text text-anchor="middle" x="502.5" y="-844.8" font-family="Arial" font-size="9.00">继承</text>
</g>
<!-- UniProcExecutor&#45;&gt;WorkerWrapperBase -->
<g id="edge6" class="edge">
<title>UniProcExecutor&#45;&gt;WorkerWrapperBase</title>
<path fill="none" stroke="black" d="M493,-763.23C493,-752.22 493,-739.36 493,-726.96"/>
<polygon fill="black" stroke="black" points="496.5,-726.72 493,-716.72 489.5,-726.72 496.5,-726.72"/>
<text text-anchor="middle" x="502.5" y="-737.8" font-family="Arial" font-size="9.00">创建</text>
</g>
<!-- GPUModelRunner -->
<g id="node14" class="node">
<title>GPUModelRunner</title>
<polygon fill="#98fb98" stroke="black" points="141.5,-118.5 141.5,-200.5 284.5,-200.5 284.5,-118.5 141.5,-118.5"/>
<text text-anchor="middle" x="213" y="-188.5" font-family="Arial" font-size="10.00">GPUModelRunner</text>
<text text-anchor="middle" x="213" y="-177.5" font-family="Arial" font-size="10.00">(worker/model_runner.py)</text>
<polyline fill="none" stroke="black" points="141.5,-170.5 284.5,-170.5"/>
<text text-anchor="start" x="149.5" y="-158.5" font-family="Arial" font-size="10.00">+ __init__(vllm_config, ...)</text>
<text text-anchor="start" x="149.5" y="-147.5" font-family="Arial" font-size="10.00">+ load_model()</text>
<text text-anchor="start" x="149.5" y="-136.5" font-family="Arial" font-size="10.00">+ execute_model()</text>
<text text-anchor="start" x="149.5" y="-125.5" font-family="Arial" font-size="10.00">+ capture_model(kv_caches)</text>
</g>
<!-- ModelRunnerBase&#45;&gt;GPUModelRunner -->
<g id="edge17" class="edge">
<title>ModelRunnerBase&#45;&gt;GPUModelRunner</title>
<path fill="none" stroke="black" d="M213,-247.32C213,-235.85 213,-223.21 213,-211.2"/>
<polygon fill="black" stroke="black" points="216.5,-210.86 213,-200.86 209.5,-210.86 216.5,-210.86"/>
<text text-anchor="middle" x="222.5" y="-221.8" font-family="Arial" font-size="9.00">继承</text>
</g>
<!-- CUDAGraphRunner -->
<g id="node15" class="node">
<title>CUDAGraphRunner</title>
<polygon fill="#ffdab9" stroke="black" points="149.5,-0.5 149.5,-71.5 276.5,-71.5 276.5,-0.5 149.5,-0.5"/>
<text text-anchor="middle" x="213" y="-59.5" font-family="Arial" font-size="10.00">CUDAGraphRunner</text>
<text text-anchor="middle" x="213" y="-48.5" font-family="Arial" font-size="10.00">(worker/model_runner.py)</text>
<polyline fill="none" stroke="black" points="149.5,-41.5 276.5,-41.5"/>
<text text-anchor="start" x="157.5" y="-29.5" font-family="Arial" font-size="10.00">+ __init__(model, ...)</text>
<text text-anchor="start" x="157.5" y="-18.5" font-family="Arial" font-size="10.00">+ capture(input_ids, ...)</text>
<text text-anchor="start" x="157.5" y="-7.5" font-family="Arial" font-size="10.00">+ forward(...)</text>
</g>
<!-- GPUModelRunner&#45;&gt;CUDAGraphRunner -->
<g id="edge18" class="edge">
<title>GPUModelRunner&#45;&gt;CUDAGraphRunner</title>
<path fill="none" stroke="black" d="M213,-118.38C213,-106.73 213,-93.92 213,-81.99"/>
<polygon fill="black" stroke="black" points="216.5,-81.78 213,-71.78 209.5,-81.78 216.5,-81.78"/>
<text text-anchor="middle" x="222.5" y="-92.8" font-family="Arial" font-size="9.00">创建</text>
</g>
</g>
</svg>
